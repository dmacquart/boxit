
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Box It - Storage by the Box</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function(){
            // TODO: Replace with your Ema
            ilJS Public Key
            emailjs.init("KS-ESZeWPvZfyRjD3");
        })();
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #0066FF;
            --primary-light: #3385FF;
            --primary-dark: #0052CC;
            --accent: #FFCC00;
            --bg: #F7F9FC;
            --white: #ffffff;
            --text: #1A1A1A;
            --text-light: #6B7280;
            --text-lighter: #9CA3AF;
            --border: #E5E7EB;
            --border-dark: #D1D5DB;
            --success: #10B981;
            --error: #EF4444;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Header */
        header {
            background: var(--white);
            border-bottom: 1px solid var(--border);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.98);
            box-shadow: var(--shadow-sm);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            color: var(--text);
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .tagline {
            font-size: 14px;
            color: var(--text-light);
            font-weight: 400;
            margin-top: 2px;
        }

        /* Progress Bar */
        .progress-bar {
            display: flex;
            justify-content: center;
            gap: 8px;
            padding: 40px 0 24px;
            align-items: center;
        }

        .progress-step {
            display: flex;
            align-items: center;
            gap: 8px;
            opacity: 0.4;
            transition: all 0.3s ease;
        }

        .progress-step.active {
            opacity: 1;
        }

        .progress-step.completed {
            opacity: 0.7;
        }

        .step-number {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s ease;
            color: var(--text-lighter);
        }

        .progress-step.active .step-number {
            background: var(--primary);
            color: var(--white);
            box-shadow: 0 0 0 4px rgba(0, 102, 255, 0.1);
        }

        .progress-step.completed .step-number {
            background: var(--success);
            color: var(--white);
        }

        .step-label {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-light);
        }

        .progress-step.active .step-label {
            color: var(--text);
        }

        /* Main Content */
        .booking-flow {
            min-height: 60vh;
            padding: 24px 0 80px;
        }

        .step-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .step-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(8px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .step-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text);
            letter-spacing: -0.02em;
        }

        .step-description {
            font-size: 16px;
            color: var(--text-light);
            margin-bottom: 32px;
            max-width: 600px;
            line-height: 1.5;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 24px;
        }

        label {
            display: block;
            font-weight: 500;
            margin-bottom: 8px;
            font-size: 14px;
            color: var(--text);
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 12px 14px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 15px;
            font-family: 'Inter', sans-serif;
            transition: all 0.2s ease;
            background: var(--white);
            color: var(--text);
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 102, 255, 0.1);
        }

        input::placeholder,
        textarea::placeholder {
            color: var(--text-lighter);
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        /* Box Counter */
        .box-counter {
            display: flex;
            align-items: center;
            gap: 20px;
            background: var(--white);
            padding: 24px;
            border-radius: 8px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow-sm);
        }

        .counter-controls {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .counter-btn {
            width: 40px;
            height: 40px;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: var(--white);
            color: var(--text);
            font-size: 20px;
            cursor: pointer;
            transition: all 0.15s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 400;
        }

        .counter-btn:hover {
            background: var(--bg);
            border-color: var(--border-dark);
        }

        .counter-btn:active {
            transform: scale(0.95);
        }

        .counter-value {
            font-size: 28px;
            font-weight: 600;
            min-width: 50px;
            text-align: center;
            color: var(--text);
        }

        .counter-label {
            font-size: 14px;
            color: var(--text-light);
        }

        /* Calendar Grid */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 8px;
            margin-top: 16px;
        }

        .calendar-day {
            padding: 16px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.15s ease;
            background: var(--white);
            text-align: center;
        }

        .calendar-day:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        .calendar-day.selected {
            background: var(--primary);
            border-color: var(--primary);
            color: var(--white);
        }

        .day-name {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 6px;
            opacity: 0.7;
        }

        .calendar-day.selected .day-name {
            opacity: 0.9;
        }

        .day-date {
            font-size: 18px;
            font-weight: 600;
        }

        /* Time Slots */
        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 8px;
            margin-top: 16px;
        }

        .time-slot {
            padding: 14px 16px;
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.15s ease;
            background: var(--white);
            text-align: center;
            font-weight: 500;
            font-size: 14px;
        }

        .time-slot:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        .time-slot.selected {
            background: var(--primary);
            border-color: var(--primary);
            color: var(--white);
        }

        /* Summary Card */
        .summary-card {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 24px;
            margin-top: 24px;
            box-shadow: var(--shadow-sm);
        }

        .summary-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
            font-size: 15px;
        }

        .summary-row:last-child {
            border-bottom: none;
        }

        .summary-label {
            color: var(--text-light);
        }

        .summary-value {
            font-weight: 600;
            color: var(--text);
        }

        .summary-total {
            margin-top: 12px;
            padding-top: 16px;
            border-top: 1px solid var(--border-dark);
        }

        .summary-total .summary-value {
            font-size: 24px;
            color: var(--primary);
            font-weight: 700;
        }

        /* Buttons */
        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 32px;
        }

        .btn {
            padding: 14px 24px;
            border-radius: 6px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s ease;
            border: none;
            font-family: 'Inter', sans-serif;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
            flex: 1;
            box-shadow: var(--shadow-sm);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            box-shadow: var(--shadow);
        }

        .btn-primary:active {
            transform: translateY(1px);
        }

        .btn-secondary {
            background: var(--white);
            color: var(--text);
            border: 1px solid var(--border);
            box-shadow: var(--shadow-sm);
        }

        .btn-secondary:hover {
            background: var(--bg);
            border-color: var(--border-dark);
        }

        /* Success Message */
        .success-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 20px;
            border-radius: 50%;
            background: var(--success);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 32px;
        }

        .confirmation-details {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 24px;
            margin-top: 24px;
            box-shadow: var(--shadow-sm);
        }

        .detail-row {
            display: flex;
            padding: 14px 0;
            border-bottom: 1px solid var(--border);
            font-size: 14px;
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-weight: 600;
            min-width: 160px;
            color: var(--text);
        }

        .detail-value {
            color: var(--text-light);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .step-title {
                font-size: 24px;
            }

            .calendar-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .time-slots {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column-reverse;
            }

            .progress-step .step-label {
                display: none;
            }

            .container {
                padding: 0 16px;
            }
        }

        @media (max-width: 480px) {
            .calendar-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Info Box */
        .info-box {
            background: #EFF6FF;
            border-left: 3px solid var(--primary);
            padding: 14px 16px;
            border-radius: 6px;
            margin: 20px 0;
        }

        .info-box p {
            margin: 0;
            font-size: 14px;
            color: var(--text);
            line-height: 1.5;
        }

        .info-box strong {
            color: var(--text);
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div>
                    <div class="logo">Box It.‚Ñ¢</div>
                    <div class="tagline">Storage by the box. Picked up. Stored. Delivered.</div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="progress-bar">
            <div class="progress-step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label">Details</div>
            </div>
            <div class="progress-step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label">Schedule</div>
            </div>
            <div class="progress-step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label">Contact</div>
            </div>
            <div class="progress-step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-label">Confirm</div>
            </div>
        </div>

        <div class="booking-flow">
            <!-- Step 1: Job Details -->
            <div class="step-content active" id="step1">
                <h1 class="step-title">How many boxes?</h1>
                <p class="step-description">Start with an estimate. We'll deliver empty Box It boxes to your door.</p>

                <div class="form-group">
                    <label>Number of Standard Boxes</label>
                    <div class="box-counter">
                        <div class="counter-controls">
                            <button class="counter-btn" onclick="decrementBoxes()">‚àí</button>
                            <div class="counter-value" id="boxCount">6</div>
                            <button class="counter-btn" onclick="incrementBoxes()">+</button>
                        </div>
                        <div class="counter-label">18" √ó 18" √ó 24" boxes</div>
                    </div>
                </div>

                <div class="info-box">
                    <p><strong>Pro tip:</strong> Most customers store 6‚Äì12 boxes. Each standard box holds about 4‚Äì5 cubic feet. Don't worry‚Äîyou can always adjust later.</p>
                </div>

                <div class="summary-card">
                    <div class="summary-title">Your Monthly Cost</div>
                    <div class="summary-row">
                        <div class="summary-label">Membership (required)</div>
                        <div class="summary-value">$25.00</div>
                    </div>
                    <div class="summary-row">
                        <div class="summary-label">Storage (<span id="summaryBoxCount">6</span> boxes √ó $15)</div>
                        <div class="summary-value">$<span id="storageTotal">90</span>.00</div>
                    </div>
                    <div class="summary-row">
                        <div class="summary-label">1 free pickup/delivery included</div>
                        <div class="summary-value">‚Äî</div>
                    </div>
                    <div class="summary-row summary-total">
                        <div class="summary-label"><strong>Total Monthly</strong></div>
                        <div class="summary-value">$<span id="monthlyTotal">115</span>.00</div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="nextStep()">Continue to Scheduling ‚Üí</button>
                </div>
            </div>

            <!-- Step 2: Schedule Pickup -->
            <div class="step-content" id="step2">
                <h1 class="step-title">Schedule your first pickup</h1>
                <p class="step-description">We'll deliver empty boxes first, then come back to pick them up once you're packed.</p>

                <div class="form-group">
                    <label>When should we deliver empty boxes?</label>
                    <div class="calendar-grid" id="deliveryCalendar"></div>
                </div>

                <div class="form-group">
                    <label>Preferred delivery time</label>
                    <div class="time-slots" id="deliveryTimeSlots"></div>
                </div>

                <div class="info-box">
                    <p><strong>How it works:</strong> We'll drop off your empty boxes. Pack on your schedule. Then schedule a pickup when you're ready (usually 3‚Äì7 days later).</p>
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="prevStep()">‚Üê Back</button>
                    <button class="btn btn-primary" onclick="nextStep()">Continue to Contact Info ‚Üí</button>
                </div>
            </div>

            <!-- Step 3: Contact Information -->
            <div class="step-content" id="step3">
                <h1 class="step-title">Where should we deliver?</h1>
                <p class="step-description">We'll need your contact details and delivery address.</p>

                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" id="fullName" placeholder="Jane Smith">
                </div>

                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" id="email" placeholder="jane@example.com">
                </div>

                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" id="phone" placeholder="(555) 123-4567">
                </div>

                <div class="form-group">
                    <label>Delivery Address</label>
                    <input type="text" id="address" placeholder="123 Main Street">
                </div>

                <div class="form-group">
                    <label>Apartment/Unit (optional)</label>
                    <input type="text" id="unit" placeholder="Apt 4B">
                </div>

                <div class="form-group">
                    <label>City</label>
                    <input type="text" id="city" placeholder="San Francisco">
                </div>

                <div class="form-group">
                    <label>State</label>
                    <select id="state">
                        <option value="">Select State</option>
                        <option value="CA">California</option>
                        <option value="NY">New York</option>
                        <option value="TX">Texas</option>
                        <!-- Add more states as needed -->
                    </select>
                </div>

                <div class="form-group">
                    <label>ZIP Code</label>
                    <input type="text" id="zip" placeholder="94102">
                </div>

                <div class="form-group">
                    <label>Special delivery instructions (optional)</label>
                    <textarea id="instructions" placeholder="E.g., Ring doorbell twice, leave by side entrance..."></textarea>
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="prevStep()">‚Üê Back</button>
                    <button class="btn btn-primary" onclick="nextStep()">Review Order ‚Üí</button>
                </div>
            </div>

            <!-- Step 4: Confirmation -->
            <div class="step-content" id="step4">
                <h1 class="step-title">Review & Confirm</h1>
                <p class="step-description">Double-check your details before we get started.</p>

                <div class="confirmation-details">
                    <div class="detail-row">
                        <div class="detail-label">Number of Boxes</div>
                        <div class="detail-value"><span id="confirmBoxes">6</span> standard boxes</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Delivery Date</div>
                        <div class="detail-value" id="confirmDeliveryDate">‚Äî</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Delivery Time</div>
                        <div class="detail-value" id="confirmDeliveryTime">‚Äî</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Name</div>
                        <div class="detail-value" id="confirmName">‚Äî</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Contact</div>
                        <div class="detail-value" id="confirmContact">‚Äî</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Delivery Address</div>
                        <div class="detail-value" id="confirmAddress">‚Äî</div>
                    </div>
                </div>

                <div class="summary-card">
                    <div class="summary-title">Pricing Summary</div>
                    <div class="summary-row">
                        <div class="summary-label">Monthly Membership</div>
                        <div class="summary-value">$25.00</div>
                    </div>
                    <div class="summary-row">
                        <div class="summary-label">Storage (<span id="confirmBoxCount">6</span> boxes √ó $15)</div>
                        <div class="summary-value">$<span id="confirmStorageTotal">90</span>.00</div>
                    </div>
                    <div class="summary-row">
                        <div class="summary-label">First delivery</div>
                        <div class="summary-value">Included</div>
                    </div>
                    <div class="summary-row summary-total">
                        <div class="summary-label"><strong>Monthly Total</strong></div>
                        <div class="summary-value">$<span id="confirmMonthlyTotal">115</span>.00</div>
                    </div>
                </div>

                <div class="info-box">
                    <p><strong>What happens next:</strong> You'll receive a confirmation email with tracking info. We'll deliver your empty boxes on your scheduled date. Pack at your own pace, then schedule a pickup through your account.</p>
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="prevStep()">‚Üê Back</button>
                    <button class="btn btn-primary" onclick="submitOrder()">Confirm & Create Account ‚Üí</button>
                </div>
            </div>

            <!-- Step 5: Success -->
            <div class="step-content" id="step5">
                <div style="text-align: center; max-width: 600px; margin: 0 auto;">
                    <div class="success-icon">‚úì</div>
                    <h1 class="step-title">You're all set!</h1>
                    <p class="step-description">Welcome to Box It. We've sent a confirmation email to <strong id="successEmail"></strong>.</p>
                    
                    <div class="confirmation-details" style="text-align: left; margin-top: 40px;">
                        <div class="detail-row">
                            <div class="detail-label">Order Number</div>
                            <div class="detail-value" id="orderNumber">#BX-2025-001</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Delivery Scheduled</div>
                            <div class="detail-value" id="successDelivery">‚Äî</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Account Email</div>
                            <div class="detail-value" id="successEmailDetail">‚Äî</div>
                        </div>
                    </div>

                    <div class="info-box" style="text-align: left; margin-top: 32px;">
                        <p><strong>Next Steps:</strong></p>
                        <p style="margin-top: 8px;">1. Check your email for account setup instructions<br>
                        2. We'll deliver your empty boxes on the scheduled date<br>
                        3. Pack at your own pace<br>
                        4. Schedule a pickup when you're ready</p>
                    </div>

                    <div class="button-group" style="margin-top: 40px;">
                        <button class="btn btn-primary" onclick="location.reload()">Place Another Order</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // State management
        let currentStep = 1;
        let formData = {
            boxes: 6,
            deliveryDate: null,
            deliveryTime: null,
            fullName: '',
            email: '',
            phone: '',
            address: '',
            unit: '',
            city: '',
            state: '',
            zip: '',
            instructions: ''
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            generateCalendar();
            generateTimeSlots();
            updatePricing();
        });

        // Box counter functions
        function incrementBoxes() {
            formData.boxes++;
            document.getElementById('boxCount').textContent = formData.boxes;
            updatePricing();
        }

        function decrementBoxes() {
            if (formData.boxes > 1) {
                formData.boxes--;
                document.getElementById('boxCount').textContent = formData.boxes;
                updatePricing();
            }
        }

        function updatePricing() {
            const storageTotal = formData.boxes * 15;
            const monthlyTotal = 25 + storageTotal;
            
            document.getElementById('summaryBoxCount').textContent = formData.boxes;
            document.getElementById('storageTotal').textContent = storageTotal;
            document.getElementById('monthlyTotal').textContent = monthlyTotal;
            
            // Update confirmation page if present
            if (document.getElementById('confirmBoxes')) {
                document.getElementById('confirmBoxes').textContent = formData.boxes;
                document.getElementById('confirmBoxCount').textContent = formData.boxes;
                document.getElementById('confirmStorageTotal').textContent = storageTotal;
                document.getElementById('confirmMonthlyTotal').textContent = monthlyTotal;
            }
        }

        // Calendar generation
        function generateCalendar() {
            const calendar = document.getElementById('deliveryCalendar');
            const days = ['SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];
            const today = new Date();
            
            // Generate next 14 days
            for (let i = 1; i <= 14; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day';
                dayDiv.innerHTML = `
                    <div class="day-name">${days[date.getDay()]}</div>
                    <div class="day-date">${date.getDate()}</div>
                `;
                dayDiv.onclick = function() {
                    document.querySelectorAll('.calendar-day').forEach(d => d.classList.remove('selected'));
                    this.classList.add('selected');
                    formData.deliveryDate = date.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });
                };
                calendar.appendChild(dayDiv);
            }
        }

        // Time slots generation
        function generateTimeSlots() {
            const slotsContainer = document.getElementById('deliveryTimeSlots');
            const slots = [
                '8:00 AM - 10:00 AM',
                '10:00 AM - 12:00 PM',
                '12:00 PM - 2:00 PM',
                '2:00 PM - 4:00 PM',
                '4:00 PM - 6:00 PM'
            ];
            
            slots.forEach(slot => {
                const slotDiv = document.createElement('div');
                slotDiv.className = 'time-slot';
                slotDiv.textContent = slot;
                slotDiv.onclick = function() {
                    document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
                    this.classList.add('selected');
                    formData.deliveryTime = slot;
                };
                slotsContainer.appendChild(slotDiv);
            });
        }

        // Navigation
        function nextStep() {
            // Validation
            if (currentStep === 2) {
                if (!formData.deliveryDate || !formData.deliveryTime) {
                    alert('Please select a delivery date and time.');
                    return;
                }
            }
            
            if (currentStep === 3) {
                // Collect form data
                formData.fullName = document.getElementById('fullName').value;
                formData.email = document.getElementById('email').value;
                formData.phone = document.getElementById('phone').value;
                formData.address = document.getElementById('address').value;
                formData.unit = document.getElementById('unit').value;
                formData.city = document.getElementById('city').value;
                formData.state = document.getElementById('state').value;
                formData.zip = document.getElementById('zip').value;
                formData.instructions = document.getElementById('instructions').value;
                
                // Basic validation
                if (!formData.fullName || !formData.email || !formData.phone || !formData.address || !formData.city || !formData.state || !formData.zip) {
                    alert('Please fill in all required fields.');
                    return;
                }
                
                // Update confirmation page
                updateConfirmation();
            }
            
            if (currentStep < 5) {
                currentStep++;
                updateStepDisplay();
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStepDisplay();
            }
        }

        function updateStepDisplay() {
            // Hide all steps
            document.querySelectorAll('.step-content').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show current step
            document.getElementById('step' + currentStep).classList.add('active');
            
            // Update progress bar
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 === currentStep) {
                    step.classList.add('active');
                } else if (index + 1 < currentStep) {
                    step.classList.add('completed');
                }
            });
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateConfirmation() {
            document.getElementById('confirmDeliveryDate').textContent = formData.deliveryDate;
            document.getElementById('confirmDeliveryTime').textContent = formData.deliveryTime;
            document.getElementById('confirmName').textContent = formData.fullName;
            document.getElementById('confirmContact').textContent = `${formData.email} ‚Ä¢ ${formData.phone}`;
            
            let address = formData.address;
            if (formData.unit) address += ', ' + formData.unit;
            address += `, ${formData.city}, ${formData.state} ${formData.zip}`;
            document.getElementById('confirmAddress').textContent = address;
            
            updatePricing();
        }

        async function submitOrder() {
            // Generate order number
            const orderNum = '#BX-' + new Date().getFullYear() + '-' + String(Math.floor(Math.random() * 1000)).padStart(3, '0');
            
            // Prepare the data
            const bookingData = {
                timestamp: new Date().toLocaleString('en-US', { 
                    year: 'numeric', 
                    month: '2-digit', 
                    day: '2-digit', 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: true 
                }),
                orderNumber: orderNum,
                boxes: formData.boxes,
                deliveryDate: formData.deliveryDate,
                deliveryTime: formData.deliveryTime,
                fullName: formData.fullName,
                email: formData.email,
                phone: formData.phone,
                address: formData.address,
                unit: formData.unit || 'N/A',
                city: formData.city,
                state: formData.state,
                zip: formData.zip,
                instructions: formData.instructions || 'None provided',
                monthlyTotal: 25 + (formData.boxes * 15),
                status: 'New'
            };
            
            console.log('üì¶ Submitting booking:', orderNum);
            
            // Configuration - TODO: Replace these with your EmailJS values
            const EMAILJS_SERVICE_ID = 'service_0itemk3';
            const EMAILJS_CUSTOMER_TEMPLATE = 'template_fj47ig7';
            const EMAILJS_ADMIN_TEMPLATE = 'YOUR_ADMIN_TEMPLATE_ID';
            const SHEET_BEST_URL = 'https://api.sheetbest.com/sheets/de5fa28b-e902-41fb-888c-de2110ddfbbc';
            
            let emailsSent = 0;
            let sheetSaved = false;
            
            try {
                // 1. Send Customer Confirmation Email
                console.log('üìß Sending customer confirmation...');
                await emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_CUSTOMER_TEMPLATE, bookingData);
                emailsSent++;
                console.log('‚úÖ Customer confirmation sent to:', formData.email);
                
                // 2. Send Admin Notification Email
                console.log('üìß Sending admin notification...');
                await emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_ADMIN_TEMPLATE, bookingData);
                emailsSent++;
                console.log('‚úÖ Admin notification sent');
                
            } catch (error) {
                console.error('‚ö†Ô∏è Email error:', error);
                alert('Your booking was received, but we had trouble sending the confirmation email. We\'ll contact you within 24 hours at ' + formData.email);
            }
            
            // 3. Save to Google Sheets (optional, won't block if it fails)
            if (SHEET_BEST_URL !== 'https://api.sheetbest.com/sheets/de5fa28b-e902-41fb-888c-de2110ddfbbc') {
                try {
                    console.log('üìä Saving to Google Sheets...');
                    const response = await fetch(SHEET_BEST_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(bookingData)
                    });
                    
                    if (response.ok) {
                        sheetSaved = true;
                        console.log('‚úÖ Booking saved to Google Sheets');
                    } else {
                        console.warn('‚ö†Ô∏è Google Sheets error:', response.status);
                    }
                } catch (error) {
                    console.warn('‚ö†Ô∏è Could not save to Google Sheets:', error);
                }
            }
            
            // Update success page
            document.getElementById('orderNumber').textContent = orderNum;
            document.getElementById('successEmail').textContent = formData.email;
            document.getElementById('successEmailDetail').textContent = formData.email;
            document.getElementById('successDelivery').textContent = `${formData.deliveryDate} ‚Ä¢ ${formData.deliveryTime}`;
            
            // Show success page
            currentStep = 5;
            updateStepDisplay();
            
            // Log summary
            console.log('‚ú® Booking complete!');
            console.log(`   Emails sent: ${emailsSent}/2`);
            console.log(`   Google Sheets: ${sheetSaved ? 'Saved' : 'Not configured or failed'}`);
        }
    </script>
</body>
</html>
